<ui:composition xmlns:h="jakarta.faces.html"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:f="jakarta.faces.core"
                xmlns="http://www.w3.org/1999/xhtml"
                template="../../resources/templates/mainTemplate.xhtml">

    <h:head>
    <ui:define name="title">My Profile</ui:define>
        <h:outputStylesheet library="css" name="profile.css"/>
    </h:head>

    <ui:define name="content">
        <h:messages globalOnly="true"/>
        <div id="profilebody">
            <div class="profilecontainer">
                <div id="profileContent">
                    <h2>Welcome, #{profileBean.user.username}!</h2>

                    <div class="form-group">
                        <label for="username">Username:</label>
                        <h:outputLabel id="username" class="profileoutput" value="#{profileBean.user.username}"/>
                    </div>

                    <div class="form-group">
                        <label for="firstName">First Name:</label>
                        <h:outputLabel class="profileoutput" id="firstName" type="text" value="#{profileBean.user.firstName}"/>
                    </div>

                    <div class="form-group">
                        <label for="lastName">Last Name:</label>
                        <h:outputLabel class="profileoutput" id="lastName" type="text" value="#{profileBean.user.lastName}"/>
                    </div>

                    <h:form>
                        <div class="form-group">
                            <label for="facultyDropdown">Select Faculty:</label>
                            <h:selectOneListbox id="facultyDropdown" value="#{profileBean.changedUser.facultyName}" size="1" styleClass="form-control">
                                <f:selectItems value="#{profileBean.facultyService.faculties}" />
                                <f:ajax listener="#{profileBean.submitFacultyChange()}" render="@form"/>
                            </h:selectOneListbox>
                        </div>

                        <h:commandButton value="Submit" action="#{profileBean.submitFacultyChange()}" />
                    </h:form>







                    <h5>Change Password</h5>
                        <label for="newPassword">New Password</label>
                        <h:inputSecret class="profileinput" id="newPassword" value="#{profileBean.newPasswordOne}"
                                       placeholder="Enter your new password" required="true">
                         <!--   <f:validator validatorId="passwordValidator"/>
                            <h:message for="newPassword"/> -->
                        </h:inputSecret>



            <h:form>
                        <label for="repeatPassword">Repeat Password</label>
                        <h:inputSecret class="profileinput" id="repeatPassword" value="#{profileBean.newPasswordTwo}" >
                         <!--   <f:validator validatorId="passwordsEqualValidator"/>
                            <f:attribute name="confirmPassword" value="#{profileBean.newPasswordTwo}"/> -->
                        </h:inputSecret>
                        <h:message for="repeatPassword"/>



                        <h:commandButton  value="Change Password" action="#{profileBean.submitPasswordChange()}"/>
                        <h:commandButton id="deleteAccountButton" class="commandButton" value="Delete Account" action="#{profileBean.deleteAccount}"/>
            </h:form>

                </div>
            </div>
        </div>
    </ui:define>

</ui:composition>
